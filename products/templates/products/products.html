{% extends "base.html" %}

{% block content %}
<h1>Products</h1>

<a href="{% url 'products:create' %}">새 글 작성</a>

<ul>
    {% for product in products %}
    <li>
        <a href="{% url 'products:product_detail' product.id %}">
            <div>[{{ product.id }}] {{ product.title }} {{ product.author }}</div>
        </a>
        <br>
    </li>

    <form action="{% url 'products:like' product.pk %}" method="POST">
        {% csrf_token %}
        {% if user in product.like_users.all %}
        <p>❤ {{ product.like_users.count }}</p>
        <input type="submit" value="좋아요 취소">
        {% else %}
        <p>❤ {{ product.like_users.count }}</p>
        <input type="submit" value="좋아요">
        {% endif %}
    </form>
    {% endfor %}
</ul>

{% endblock content %}